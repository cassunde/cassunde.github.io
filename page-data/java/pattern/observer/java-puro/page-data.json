{"componentChunkName":"component---src-templates-index-js","path":"/java/pattern/observer/java-puro","result":{"data":{"site":{"meta":{"title":"Cassunde","description":"Cassunde profile and Blog","url":"https://cassunde.github.io","author":"cassunde","twitter":"@MattheusCassund","adsense":""}},"post":{"id":"38d11c12-e108-5799-ba2e-778c1267218e","html":"<h2>Usando padrão Observer com PropertyChangeListener</h2>\n<p>Anotando como podemos implementar padrão observer usando <strong>PropertyChangeListener</strong></p>\n<p>Dentro dessa arquitetura teremos basicamente dois pilares, o <code class=\"language-text\">Observer</code> e o <code class=\"language-text\">Listener</code></p>\n<!--more-->\n<p><strong>Observer</strong></p>\n<p>Será o componente que informará que houve uma alteração para quem quiser saber dentro da aplicação</p>\n<p><strong>Listener</strong></p>\n<p>Será o componente que ficará escutando as alterações de um determinado objeto.</p>\n<p><strong>Cenário</strong></p>\n<p>Nosso cenário teremos uma rotina de vendas e sempre que recebermos uma venda deveremos disparar um e-mail para o comprador e disparar a rotina de criar nota fiscal.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; margin-bottom: 1.0725rem; max-width: 750px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.44817374136229%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAAu0lEQVQoz42S2Q6EMAhF+f8v7YvGpbbWpUwOGYwxOs5NCFDgsqjoF7XWQ78JmKZJU0o6jqP2fW8+tjwVXHF+jzFq0zT25qTYkMpd4bZtJvu+67quZgM0RaUUzTmbPc+zLstixIjQjQ4IBCQQIJlVvJA4Njm/ICR2Xadt2xpRCMEmoauvxUTEzls8nUYoZC0mA2gmgYSY+xDi+4QQeq0PgJanw9/d1htczzEMw2HLP7/JtRHEnMltvgNgqw+zb3VxUIMp5wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"post pattern observer\"\n        title=\"post pattern observer\"\n        src=\"/static/dc47456f99e3120056899b5c979320f4/1d69c/post_pattern_observer.png\"\n        srcset=\"/static/dc47456f99e3120056899b5c979320f4/4dcb9/post_pattern_observer.png 188w,\n/static/dc47456f99e3120056899b5c979320f4/5ff7e/post_pattern_observer.png 375w,\n/static/dc47456f99e3120056899b5c979320f4/1d69c/post_pattern_observer.png 750w,\n/static/dc47456f99e3120056899b5c979320f4/4b2cc/post_pattern_observer.png 1013w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><strong>Classes</strong></p>\n<p>Começar criando a primeira classe do nosso Pedido</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Order</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> code<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> product<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> status<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Agora uma classe responsável por receber a notificação de alteração e informar que tivemos uma alteração.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OderObserver</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">PropertyChangeSupport</span> support<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OderObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>support <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PropertyChangeSupport</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PropertyChangeListener</span> listener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span><span class=\"token function\">addPropertyChangeListener</span><span class=\"token punctuation\">(</span>listener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">notification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Order</span> order<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span><span class=\"token function\">firePropertyChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"order\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> order<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Essa classe acima será a classe responsável por registrar todos os <code class=\"language-text\">Listener</code> e dispararar as notificações.</p>\n<p><strong>Implementando os <code class=\"language-text\">Listener</code></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderListenerToSendEmail</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">PropertyChangeListener</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">propertyChange</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PropertyChangeEvent</span> evt<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Order</span> order <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Order</span><span class=\"token punctuation\">)</span> evt<span class=\"token punctuation\">.</span><span class=\"token function\">getNewValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"send email to order: \"</span><span class=\"token operator\">+</span>order<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderListenerToCreateNFe</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">PropertyChangeListener</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">propertyChange</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PropertyChangeEvent</span> evt<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Order</span> order <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Order</span><span class=\"token punctuation\">)</span> evt<span class=\"token punctuation\">.</span><span class=\"token function\">getNewValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"create NFe: \"</span><span class=\"token operator\">+</span>order<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Depois dessas implementações precisamos registrar-las no <code class=\"language-text\">Observer</code> que criamos anteriormente e usar.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">checkOrder</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Order</span> order<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">OrderObserver</span> orderObserver <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OrderObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    orderObserver<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">OrderListenerToSendEmail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    orderObserver<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">OrderListenerToCreateNFe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   \t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>order <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      order<span class=\"token punctuation\">.</span><span class=\"token function\">setStatus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DONE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \n    <span class=\"token punctuation\">}</span>\n    \n    orderObserver<span class=\"token punctuation\">.</span><span class=\"token function\">notification</span><span class=\"token punctuation\">(</span>order<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Podemos usar outros mecanismos para extrair esse detalhe de <code class=\"language-text\">Observe</code> de dentro da classe de negócio mas o objetivo era exemplificar o uso dessas classes.</p>","frontmatter":{"layout":"post","title":"Padrão Observer usando Java Puro","path":"/java/pattern/observer/java-puro","category":"Java","tags":["Arquitetura","Design"],"description":"","date":"2021/06/20","image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAyUlEQVQoz2PQ0dT5jw1ra2j/JySHUKP7Xxsqx0CcBtxqtNS1/msoq4JpbQ0cBqIbClIM1qiqAebD5DSBfC117f9dM5b8j09M+6+ioITfQH0d/f9BAUH/E+MS/6cmp/4PCQz5r6ulC1EDMhjo1fnL1/5fsvvsfwsL2/9aahq4DYQZaqBr8N/YwPi/iaEJmIbJaaqq/7ewtPtf29b3387SCug6ZbBlOMMQOYxAWFNNExpO2ijBoaKoAgwKTbBhID4DObGMLA8LAhgfAGma2itqnWfAAAAAAElFTkSuQmCC","aspectRatio":2.8365384615384617,"src":"/static/dc41e658ca4c7d16468605d58ddb3ab6/46604/banner.png","srcSet":"/static/dc41e658ca4c7d16468605d58ddb3ab6/62d80/banner.png 125w,\n/static/dc41e658ca4c7d16468605d58ddb3ab6/e1953/banner.png 250w,\n/static/dc41e658ca4c7d16468605d58ddb3ab6/46604/banner.png 500w,\n/static/dc41e658ca4c7d16468605d58ddb3ab6/d8815/banner.png 750w,\n/static/dc41e658ca4c7d16468605d58ddb3ab6/31987/banner.png 1000w,\n/static/dc41e658ca4c7d16468605d58ddb3ab6/37092/banner.png 1180w","sizes":"(max-width: 500px) 100vw, 500px"}}}}}},"pageContext":{}}}